# coding: utf-8

all_spend = 140 + 50 + 284.79 + 127.11 + 97.75 + 150
all_spend
get_ipython().magic(u'pinfo str.find')
import pandas_qs_the_merge
get_ipython().magic(u'pwd ')
get_ipython().magic(u'pwd ')
get_ipython().magic(u'cd ../../rank/agur/aggregate_universities_ranking/')
import pandas_qs_the_merge
import pandas_qs_the_merge
import pandas_qs_the_merge
import pandas_qs_the_merge
import pandas_qs_the_merge
from pandas_qs_the_merge import *
qs_df[:6]
the_df[:6]
import name_matching
from name_matching import entity_name_match
qs_df[:6]
the_df[:6]
entity_name_match('Massachusetts Institute of Technology (MIT)', 'Massachusetts Institute of Technology')
entity_name_match('Massachusetts Institute of Technology (MIT)', 'California Institute of Technology (Caltech)')
reload(name_matching)
from name_matching import entity_name_match
entity_name_match('Massachusetts Institute of Technology (MIT)', 'California Institute of Technology (Caltech)')
reload(name_matching)
from name_matching import entity_name_match
entity_name_match('Massachusetts Institute of Technology (MIT)', 'California Institute of Technology (Caltech)')
entity_name_match('Massachusetts Institute of Technology (MIT)', 'Massachusetts Institute of Technology')
leiden_name = RankingName.objects.filter(short_name='Leiden')[0]
leiden_raw_records = list(leiden_name.rawrankingrecord_set.all().values())
leiden_df = DataFrame(leiden_raw_records)
leiden_df[:6]
entity_name_match('Massachusetts Institute of Technology (MIT)', 'MIT')
qs_df[:6]
entity_name_match('Harvard Univ', 'Harvard University')
f = lambda x: str.find(x, 'Oxford') != - 1
leiden_df[leiden_df['university_name'].map(f)]
f = lambda x: unicode.find(x, 'Oxford') != - 1
leiden_df[leiden_df['university_name'].map(f)]
qs_df[:6]
